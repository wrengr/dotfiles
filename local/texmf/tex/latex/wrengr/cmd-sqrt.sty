% ~~~~~ New definition of square root with closing hook
\NeedsTeXFormat{LaTeX2e} 
\ProvidesPackage{cmd-sqrt}[2007/09/25 New square root with closing hook]


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%% N.B. This will only work for sqrt; if multiple roots are used,
%% ala \sqrt[b]{a}, then you get garbage
%% HACK: This is TeX code, not LaTeX

% Rename \sqrt as \oldsqrt
\let\oldsqrt\sqrt

% Define the new \sqrt in terms of the old one
\def\sqrt{\mathpalette\DHLhksqrt}

\def\DHLhksqrt#1#2{%
\setbox0=\hbox{$#1\oldsqrt{#2\,}$}\dimen0=\ht0
\advance\dimen0-0.2\ht0
\setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
{\box0\lower0.4pt\box2}}
